#GCM(Google Cloud Messaging) 

## 푸시



#### GCM 시스템
푸시를 보내고 싶은 해당 앱의 토큰을 얻어다가 푸시서버에서 얻어진 토큰들을 상대로 푸시를 발송하면
푸시가 발송된다. 
1. 안드로이드 개발자 센터를 통해 GCM API KEY를 생성한다.
2. 앱 소스에 GCM 토큰생성 및 알림발생 코드를 삽입한다.
3. 토큰생성 소스를 통해 생성된 토큰을 푸시서버에 발송하고 푸시서버에서는 발송된 토큰을 저장한다.
4. 이렇게 저장된 토큰을 가지고 푸시서버에서 해당 토큰들에게 푸시를 발송한다.
5. 푸시가 발송되면 해당 앱의 리시버가 전달받아 알림발생코드를 통해 알림을 출력한다.




#### 테스트 방법
푸시서버에서 발송을 했다고 가정하고 

|앱 설치     |핸드폰 상태 |인터넷 상태  |백그라운드 상태|앱 실행	  |알림		 |
|-----------|-----------|-----------|-------------|-----------|-----------|
|O		    |실행	       |O		   |O		     |O		     |O		     |
|O		    |실행	       |O		   |O		     |X		     |O		     |
|O		    |실행	       |O		   |X		     |X		     |O		     |
|O		    |실행	       |X		   |-		     |-		     |O		     |
|O		    |종료	       |-		   |-		     |-		     |O		     |
|O		    |-	        |X		    |-		      |-		   |X		   |
|X		    |-	        |-		    |-		      |-		   |X		   |
-  앱이 설치되어 있으며 핸드폰은 실행중이고 인터넷이 연결되어 있다면 즉시 알람을 받을 수  있다.
- 인터넷이 연결되어 있지 않은 경우는 인터넷이 연결되면 알림이 실행된다.
- 핸드폰 전원이 꺼있다면 켜진 후에 인터넷이 연결되면 알림이 실행된다.
- 즉 앱이 삭제 상태만 아니라면 알림을 받을 수 있다.


----------------------------------------------------------------------------

#### 참고자료

- GCM 테스트 [http://blog.saltfactory.net/android/implement-push-service-via-gcm.html](http://blog.saltfactory.net/android/implement-push-service-via-gcm.html)
- GCM 전송 [https://gcmsender.herokuapp.com/](https://gcmsender.herokuapp.com/)
- 안드로이드 개발자 센터 [https://developers.google.com](https://developers.google.com)
- GCM 관리 [https://console.firebase.google.com](https://console.firebase.google.comㅊ)

#### 푸시서버 구축 및 통계
푸시를 위한 토큰관리, 메시지 제목입력, 통계데이터 등 푸시서버 구축에 관한 부분은 구글에서 지원하는 
방식을 사용해도 되고 따로 구축해도 되는 것으로 판단된다.